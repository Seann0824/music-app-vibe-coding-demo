<template>
  <div class="tab-bar-container">
    <!-- 主导航栏 -->
    <div class="tab-bar">
      <!-- 首页 -->
      <div
        class="tab-item"
        :class="{ active: activeTab === '推荐' }"
        @click="switchTab('推荐')"
      >
        <svg
          class="tab-icon"
          xmlns="http://www.w3.org/2000/svg"
          xmlns:xlink="http://www.w3.org/1999/xlink"
          fill="none"
          version="1.1"
          width="24"
          height="24"
          viewBox="0 0 24 24"
        >
          <g>
            <path
              d="M23.999001,12.0005C23.999001,5.3722801,18.626699,0,11.9995,0C5.3722801,0,0,5.3722801,0,12.0005C0,18.627701,5.3722801,24,11.9995,24C18.626699,24,23.999001,18.627701,23.999001,12.0005ZM6.3386798,12.0005C6.3386798,8.8786097,8.8776197,6.34061,11.9995,6.34061C15.1214,6.34061,17.658501,8.8786097,17.6584,12.0005C17.6584,15.1194,15.1214,17.6604,11.9995,17.6604C8.8776398,17.6604,6.3386798,15.1195,6.3386798,12.0005ZM8.0274658,12.00037C8.0274658,9.8071003,9.8053055,8.0283203,11.999536,8.0283203C14.191806,8.0283203,15.971616,9.8070803,15.971616,12.00037C15.971616,14.19365,14.191786,15.972481,11.999536,15.972481C9.8053055,15.972481,8.0274658,14.19363,8.0274658,12.00037ZM10.599326,12.00037C10.599326,12.773081,11.226816,13.4006,11.999536,13.4006C12.772266,13.4006,13.399715,12.7731,13.399715,12.00037C13.399715,11.22671,12.772245,10.600201,11.999536,10.600201C11.226816,10.600201,10.599326,11.22671,10.599326,12.00037Z"
              fill-rule="evenodd"
            />
          </g>
        </svg>
        <div class="tab-label">首页</div>
      </div>

      <!-- 淘碟 -->
      <div
        class="tab-item"
        :class="{ active: activeTab === '唱片' }"
        @click="switchTab('唱片')"
      >
        <svg
          class="tab-icon"
          xmlns="http://www.w3.org/2000/svg"
          xmlns:xlink="http://www.w3.org/1999/xlink"
          fill="none"
          version="1.1"
          width="24"
          height="24"
          viewBox="0 0 24 24"
        >
          <g>
            <path
              d="M9.4285698,12.8571C9.4285698,11.4,10.5429,10.2857,12,10.2857C13.4571,10.2857,14.5714,11.4,14.5714,12.8571C14.5714,14.3143,13.4571,15.4286,12,15.4286C10.5429,15.4286,9.4285698,14.3143,9.4285698,12.8571C9.4285698,12.8571,9.4285698,12.8571,9.4285698,12.8571ZM12,24C5.4000001,24,0,18.6,0,12C0,5.4000001,5.4000001,0,12,0C13.2,0,14.3143,0.17142799,15.4286,0.51428598C15.4286,0.51428598,15.4286,9.0857096,15.4286,9.0857096C14.4857,8.22857,13.2857,7.7142901,12,7.7142901C9.1714296,7.7142901,6.8571401,10.0286,6.8571401,12.8571C6.8571401,15.6857,9.1714296,18,12,18C14.8286,18,17.1429,15.6857,17.1429,12.8571C17.1429,12.8571,17.1429,1.2,17.1429,1.2C21.1714,3.08571,24,7.2857099,24,12C24,18.6,18.6,24,12,24C12,24,12,24,12,24Z"
            />
          </g>
        </svg>
        <div class="tab-label">淘碟</div>
      </div>

      <!-- 中间特殊按钮 -->
      <div class="tab-center">
        <img
          src="/assets/Tabbaritem2.svg"
          alt="中心按钮"
          class="center-button"
        />
      </div>

      <!-- 动态 -->
      <div
        class="tab-item"
        :class="{ active: activeTab === '动态' }"
        @click="switchTab('动态')"
      >
        <svg
          class="tab-icon"
          xmlns="http://www.w3.org/2000/svg"
          xmlns:xlink="http://www.w3.org/1999/xlink"
          fill="none"
          version="1.1"
          width="24"
          height="24"
          viewBox="0 0 24 24"
        >
          <g>
            <path
              d="M18.6,1C18.6,1,8.6999998,1,8.6999998,1C4.447400099999999,1,0.999999978472699,4.447400099999999,1,8.6999998C1,8.6999998,1,18.6,1,18.6C1,21.0299,2.9701,23,5.4000001,23C5.4000001,23,15.3,23,15.3,23C19.552601,23,23,19.552601,23,15.3C23,15.3,23,5.4000001,23,5.4000001C23,2.9701,21.0299,1.0000000000000007,18.6,1.0000000000000007C18.6,1.0000000000000007,18.6,1,18.6,1C18.6,1,18.6,1,18.6,1ZM16.444000000000003,15.311C16.444000000000003,15.311,7.6440001,15.311,7.6440001,15.311C7.0367999,15.311,6.5440001,14.8182,6.5440001,14.211C6.5440001,13.6038,7.0367999,13.111,7.6440001,13.111C7.6440001,13.111,16.444000000000003,13.111,16.444000000000003,13.111C17.051201,13.111,17.544001,13.6038,17.544001,14.211C17.544001,14.8182,17.052299,15.311,16.444000000000003,15.311C16.444000000000003,15.311,16.444000000000003,15.311,16.444000000000003,15.311ZM16.444000000000003,10.8900995C16.444000000000003,10.8900995,7.6440001,10.8900995,7.6440001,10.8900995C7.0367999,10.8900995,6.5440001,10.3972998,6.5440001,9.7901001C6.5440001,9.1829004,7.0367999,8.6901002,7.6440001,8.6901002C7.6440001,8.6901002,16.444000000000003,8.6901002,16.444000000000003,8.6901002C17.051201,8.6901002,17.544001,9.1829004,17.544001,9.7901001C17.544001,10.3972998,17.052299,10.8900995,16.444000000000003,10.8900995C16.444000000000003,10.8900995,16.444000000000003,10.8900995,16.444000000000003,10.8900995Z"
            />
          </g>
        </svg>
        <div class="tab-label">动态</div>
      </div>

      <!-- 我的 -->
      <div
        class="tab-item"
        :class="{ active: activeTab === '我的' }"
        @click="switchTab('我的')"
      >
        <svg
          class="tab-icon"
          xmlns="http://www.w3.org/2000/svg"
          xmlns:xlink="http://www.w3.org/1999/xlink"
          fill="none"
          version="1.1"
          width="24"
          height="24"
          viewBox="0 0 24 24"
        >
          <g>
            <path
              d="M11.72133158046875,1C11.72133158046875,1,17.867061980468748,1,17.867061980468748,1C17.867061980468748,1,17.867061980468748,7.1457701,17.867061980468748,7.1457701C17.867061980468748,8.36128,17.50666098046875,9.5495005,16.83136198046875,10.5601702C16.15606098046875,11.5708,15.19620098046875,12.3586,14.07321198046875,12.8237C12.95022198046875,13.2889,11.71451188046875,13.4106,10.52235128046875,13.1734C9.33019158046875,12.9363,8.235121680468751,12.351,7.37562128046875,11.4915C6.51611658046875,10.6319799,5.93078948046875,9.5369101,5.69365358046875,8.3447399C5.45651748046875,7.1525798,5.57822468046875,5.9168701,6.04338358046875,4.79388C6.50854158046875,3.6708901,7.29626178046875,2.71105,8.30692148046875,2.03575C9.31759168046875,1.360443,10.50581168046875,1.0000000000000004,11.72133158046875,1C11.72133158046875,1,11.72133158046875,1,11.72133158046875,1ZM6.19000478046875,14.521729C6.19000478046875,14.521729,17.252654980468748,14.521729,17.252654980468748,14.521729C18.39265398046875,14.521729,19.48605498046875,14.97462,20.29225498046875,15.780768C21.09835398046875,16.586919,21.55125398046875,17.680288,21.55125398046875,18.820349C21.55125398046875,18.820349,21.55125398046875,19.434799,21.55125398046875,19.434799C21.55125398046875,20.412579,21.16285498046875,21.350298,20.47145498046875,22.041689C19.78005398046875,22.733089,18.84235598046875,23.121498,17.86455498046875,23.121498C17.86455498046875,23.121498,5.5755550804687495,23.121498,5.5755550804687495,23.121498C4.5977849804687505,23.121498,3.66005488046875,22.733089,2.96866498046875,22.041689C2.27727398046875,21.350298,1.8888549804688146,20.412579,1.8888549804688144,19.434799C1.8888549804688144,19.434799,1.8888549804688144,18.820349,1.8888549804688144,18.820349C1.888854882767049,18.255638,2.00012598046875,17.696459,2.21630999046875,17.174759C2.4324939804687498,16.653059,2.74935400046875,16.179069,3.1487849804687498,15.779868C3.54821508046875,15.380674,4.022394880468751,15.064095,4.54421498046875,14.848218C5.06604508046875,14.632339,5.62528488046875,14.521397,6.19000478046875,14.521729C6.19000478046875,14.521729,6.19000478046875,14.521729,6.19000478046875,14.521729Z"
            />
          </g>
        </svg>
        <div class="tab-label">我的</div>
      </div>
    </div>

    <!-- 底部指示器 -->
    <div class="home-indicator">
      <div class="indicator"></div>
    </div>
  </div>
</template>

<script setup lang="ts">
const props = defineProps<{
  activeTab: string;
}>();

const emit = defineEmits<{
  switchTab: [tab: string];
}>();

const switchTab = (tab: string) => {
  console.log("TabBar - 切换标签页到:", tab);
  emit("switchTab", tab);
};
</script>

<style scoped>
/* CSS变量 - 根据设计图定义 */
:root {
  --token-color: rgba(247, 108, 90, 1);
  --token-color-1: rgba(129, 131, 135, 1);
  --token-color-2: rgba(73, 76, 82, 1);
  --token-color-3: rgba(37, 40, 48, 1);
  --token-color-4: rgba(26, 29, 37, 1);
  --label-color-dark-primary: rgba(255, 255, 255, 1);
  --token-color-5: linear-gradient(
    180deg,
    rgba(232, 205, 168, 1) 0%,
    rgba(244, 230, 207, 1) 100%
  );
  --token-color-6: rgba(26, 29, 37, 1);
  --token-color-7: rgba(255, 255, 255, 1);
  --token-color-8: rgba(232, 205, 167, 1);
}

/* TabBar容器 */
.tab-bar-container {
  position: fixed;
  bottom: 0;
  width: 100%;
  max-width: 375px;
  height: 78px;
  display: flex;
  flex-direction: column;
  z-index: 100;
}

/* 主导航栏 */
.tab-bar {
  display: flex;
  justify-content: center;
  align-items: flex-start;
  padding: 5px 0 0 0;
  background-color: var(--token-color-6);
  height: 51px;
  width: 100%;
}

/* 导航项 */
.tab-item {
  display: flex;
  flex-direction: column;
  justify-content: flex-start;
  align-items: center;
  gap: 4px;
  padding: 2px 24px;
  width: 72.6px;
  height: 46px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.tab-item:hover {
  opacity: 0.8;
}

/* 图标 */
.tab-icon {
  width: 24px;
  height: 24px;
  flex-shrink: 0;
  fill: var(--token-color-2);
  transition: fill 0.2s ease;
}

/* 标签文字 */
.tab-label {
  color: var(--token-color-2);
  white-space: nowrap;
  font-family: "SFProText-Medium", -apple-system, BlinkMacSystemFont, sans-serif;
  font-size: 10px;
  line-height: 14px;
  text-align: center;
  width: 20px;
  height: 14px;
  flex-shrink: 0;
  transition: color 0.2s ease;
}

/* 选中状态 */
.tab-item.active .tab-icon {
  fill: var(--token-color-7);
}

.tab-item.active .tab-label {
  color: var(--token-color-7);
}

/* 中间特殊按钮 */
.tab-center {
  flex-grow: 1;
  display: flex;
  justify-content: center;
  align-items: center;
  width: 84.6px;
  height: 38px;
}

.center-button {
  width: 84.6px;
  height: 38px;
  cursor: pointer;
  transition: transform 0.2s ease;
}

.center-button:hover {
  transform: scale(1.05);
}

/* 底部指示器 */
.home-indicator {
  position: relative;
  background-color: var(--token-color-4);
  height: 27px;
  width: 100%;
  display: flex;
  justify-content: center;
  align-items: flex-end;
  padding-bottom: 8px;
}

.indicator {
  border-radius: 100px;
  background-color: var(--label-color-dark-primary);
  width: 134px;
  height: 5px;
}
</style>
